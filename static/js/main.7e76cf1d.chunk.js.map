{"version":3,"sources":["Components/Post/Comment.jsx","Components/Post/Comments.jsx","utils/getComments.js","Components/Post/SortDropdown.jsx","Components/Post/CommentsContainer.jsx","Components/Post/PostContent.jsx","Components/Post/FullPost.jsx","utils/getTopPosts.js","Components/PostsList/PostEntry.jsx","Components/PostsList/PostList.jsx","App.js","serviceWorker.js","index.js"],"names":["comment","created_at","author","text","children","timestamp","distanceInWordsToNow","Date","addSuffix","useState","childrenHidden","setChildrenHidden","showHideChildren","useCallback","className","onClick","dangerouslySetInnerHTML","__html","length","Comments","comments","style","map","Comment","key","id","usePostComments","setComments","loading","setLoading","commentsRef","useRef","default","a","fetch","response","json","post","current","console","error","useEffect","getComments","option","commentsCopy","sort","cmt1","cmt2","created_at_i","sortCommentsImpl","DropdownMenu","clickHandler","options","selectedOption","color","undefined","sortComments","setSelectedOption","handler","postId","SortDropdown","marginLeft","by","descendants","score","time","title","url","urlShortened","textShortened","hnUrl","slice","openExtLinkInNewTab","event","stopPropagation","window","open","focus","openInNewTab","copyToClipboard","navigator","clipboard","writeText","then","alert","catch","err","startsWith","clearDisplayedPost","marginBottom","backgroundColor","width","top","left","paddingLeft","PostContent","CommentsContainer","postsFetchedSoFar","memo","setDisplayedPost","openHNPageInNewTab","log","posts","fetchPosts","dataLength","next","hasMore","loader","endMessage","PostEntry","App","noOfPostsToFetch","topPosts","setTopPosts","postIds","fetchPostContent","startIndex","reqs","i","req","push","Promise","all","responses","jsonPromises","res","useTopPosts","displayedPost","PostList","FullPost","Boolean","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","serviceWorker","ready","registration","unregister","message"],"mappings":"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","file":"static/js/main.7e76cf1d.chunk.js","sourcesContent":["import React, { useState, useCallback } from 'react';\r\nimport distanceInWordsToNow from 'date-fns/formatDistanceToNow';\r\nimport Comments from './Comments';\r\n\r\nexport default ({ comment }) => {\r\n  const { created_at, author, text, children } = comment;\r\n  const timestamp = distanceInWordsToNow(new Date(created_at), {\r\n    addSuffix: true,\r\n  });\r\n\r\n  const [childrenHidden, setChildrenHidden] = useState(false);\r\n\r\n  const showHideChildren = useCallback(() => {\r\n    if (childrenHidden) setChildrenHidden(false);\r\n    else setChildrenHidden(true);\r\n  }, [setChildrenHidden]);\r\n\r\n  return (\r\n    <div className=\"comment-container comment-container-outer\">\r\n      {!childrenHidden && (\r\n        <div\r\n          onClick={showHideChildren}\r\n          className=\"threadline-container threadline-container-outer\"\r\n        >\r\n          <div className=\"threadline\"></div>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"comment-content\">\r\n        <div onClick={() => setChildrenHidden(false)} className=\"post-metadata\">\r\n          {childrenHidden && '[+]'}\r\n          {author} Â· {timestamp}\r\n        </div>\r\n\r\n        {!childrenHidden && (\r\n          <div\r\n            className=\"comment-body\"\r\n            dangerouslySetInnerHTML={{ __html: text }}\r\n          ></div>\r\n        )}\r\n\r\n        {!childrenHidden && !!children.length && (\r\n          <Comments comments={children} />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport Comment from './Comment';\r\n\r\nexport default ({ comments, style }) => {\r\n  return (\r\n    <div style={style} className=\"comments\">\r\n      {comments.map((comment) => (\r\n        <Comment key={comment.id} comment={comment} />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n","import { useState, useEffect, useRef } from 'react';\r\n\r\nexport function usePostComments(id) {\r\n  const [comments, setComments] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const commentsRef = useRef({ default: comments });\r\n\r\n  async function getComments(id) {\r\n    try {\r\n      const response = await fetch(`http://hn.algolia.com/api/v1/items/${id}`);\r\n      const post = await response.json();\r\n      setComments(post.children);\r\n      commentsRef.current = post.children;\r\n      setLoading(false);\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  }\r\n\r\n  const sortComments = (option) => {\r\n    if (option === 'Default') setComments(commentsRef.current);\r\n    else setComments(sortCommentsImpl(option, comments));\r\n  };\r\n\r\n  useEffect(() => {\r\n    getComments(id);\r\n  }, []);\r\n\r\n  return [comments, loading, sortComments];\r\n}\r\n\r\nfunction sortCommentsImpl(option, comments) {\r\n  const commentsCopy = [...comments];\r\n\r\n  switch (option) {\r\n    case 'Newest':\r\n      commentsCopy.sort((cmt1, cmt2) => cmt2.created_at_i - cmt1.created_at_i);\r\n      break;\r\n    case 'Oldest':\r\n      commentsCopy.sort((cmt1, cmt2) => cmt1.created_at_i - cmt2.created_at_i);\r\n      break;\r\n    default:\r\n      return comments;\r\n  }\r\n\r\n  return commentsCopy;\r\n}\r\n","import React from 'react';\r\nimport { useState } from 'react';\r\nimport { useCallback } from 'react';\r\n\r\nconst DropdownMenu = ({ clickHandler, options, selectedOption }) => {\r\n  return (\r\n    <div className=\"dropdown-menu-container\">\r\n      <ul className=\"dropdown-menu\">\r\n        {options.map((option) => {\r\n          const style =\r\n            option === selectedOption\r\n              ? { color: 'var(--orange-accent)' }\r\n              : undefined;\r\n          return (\r\n            <li style={style} key={option} onClick={() => clickHandler(option)}>\r\n              {option}\r\n            </li>\r\n          );\r\n        })}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ({ sortComments }) => {\r\n  const options = [\r\n    // 'Most Points',\r\n    'Default',\r\n    'Newest',\r\n    'Oldest',\r\n    // 'Least Points',\r\n  ];\r\n  const [selectedOption, setSelectedOption] = useState('Default');\r\n\r\n  const handler = useCallback(\r\n    (option) => {\r\n      setSelectedOption(option);\r\n      sortComments(option);\r\n    },\r\n    [setSelectedOption, sortComments]\r\n  );\r\n\r\n  return (\r\n    <div className=\"sort-comment-dropdown\">\r\n      Sort By\r\n      <div className=\"dropdown-container\">\r\n        <span>{selectedOption}</span>\r\n        <DropdownMenu\r\n          clickHandler={handler}\r\n          options={options}\r\n          selectedOption={selectedOption}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { Fragment } from 'react';\r\nimport Comments from './Comments';\r\nimport { usePostComments } from '../../utils/getComments';\r\nimport SortDropdown from './SortDropdown';\r\n\r\nexport default ({ postId }) => {\r\n  const [comments, loading, sortComments] = usePostComments(postId);\r\n\r\n  return (\r\n    <Fragment>\r\n      {!loading && <SortDropdown sortComments={sortComments} />}\r\n      {!loading && (\r\n        <Comments style={{ marginLeft: '-20px' }} comments={comments} />\r\n      )}\r\n      {loading && <h1>Loading Comments...</h1>}\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { Fragment, useCallback } from 'react';\r\nimport distanceInWordsToNow from 'date-fns/formatDistanceToNow';\r\n\r\nfunction openInNewTab(event, url) {\r\n  event.stopPropagation();\r\n  var win = window.open(url, '_blank');\r\n  win.focus();\r\n}\r\n\r\nexport default ({ post }) => {\r\n  const { by, descendants, id, score, time, title, text, url } = post;\r\n\r\n  const timestamp = distanceInWordsToNow(new Date(time * 1000), {\r\n    addSuffix: true,\r\n  });\r\n  let urlShortened = '';\r\n  let textShortened = '';\r\n  const hnUrl = `https://news.ycombinator.com/item?id=${id}`;\r\n\r\n  if (text && text.length > 900) {\r\n    textShortened = text.slice(0, 900) + '...';\r\n    textShortened += `<br />\r\n                      <a target=\"_blank\" \r\n                         rel=\"noopener noreferrer\"\r\n                         href='${hnUrl}'\r\n                      >\r\n                        Read more\r\n                      </a>`;\r\n  }\r\n\r\n  const openExtLinkInNewTab = useCallback((event) => openInNewTab(event, url), [\r\n    url,\r\n  ]);\r\n\r\n  const copyToClipboard = useCallback(\r\n    (event) => {\r\n      event.stopPropagation();\r\n      navigator.clipboard\r\n        .writeText(url)\r\n        .then(() => alert(`URL copied: ${url}`))\r\n        .catch((err) => console.error(err));\r\n    },\r\n    [url]\r\n  );\r\n\r\n  if (url) {\r\n    urlShortened = url.startsWith('https://')\r\n      ? url.slice(8, 33)\r\n      : url.slice(0, 25);\r\n    urlShortened = urlShortened.startsWith('http://')\r\n      ? urlShortened.slice(7, 32)\r\n      : urlShortened.slice(0, 25);\r\n    urlShortened = urlShortened.startsWith('www.')\r\n      ? urlShortened.slice(4)\r\n      : urlShortened.slice(0);\r\n\r\n    if (urlShortened.slice(-1) === '/')\r\n      urlShortened = urlShortened.slice(0, -1);\r\n    if (url.length > 33) urlShortened += '...';\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <div className=\"like-count\">\r\n        <div>{score}</div>\r\n        <div>Likes</div>\r\n      </div>\r\n\r\n      <div className=\"post-content\">\r\n        <div className=\"post-metadata\">\r\n          Posted by {by} {timestamp}\r\n        </div>\r\n        <h2 className=\"post-title\">{title}</h2>\r\n        <div className=\"post-body\">\r\n          {url && (\r\n            <p onClick={openExtLinkInNewTab} className=\"url-shortened\">\r\n              {urlShortened}\r\n            </p>\r\n          )}\r\n          {text && (\r\n            <div\r\n              className=\"post-text\"\r\n              dangerouslySetInnerHTML={{ __html: textShortened }}\r\n            ></div>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"post-bottom\">\r\n          <div>{descendants} Comments</div>\r\n          <div onClick={copyToClipboard}>Copy Link</div>\r\n          <div>Save</div>\r\n          <div>Hide</div>\r\n        </div>\r\n      </div>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { Fragment } from 'react';\r\nimport CommentsContainer from './CommentsContainer';\r\nimport PostContent from './PostContent';\r\n\r\nexport default ({ post, clearDisplayedPost }) => {\r\n  return (\r\n    <Fragment>\r\n      <button\r\n        style={{\r\n          // TODO: Move inline styles to global CSS\r\n          marginBottom: '-2px',\r\n          backgroundColor: 'white',\r\n        }}\r\n        onClick={clearDisplayedPost}\r\n      >\r\n        {'< back'}\r\n      </button>\r\n\r\n      <div\r\n        style={{\r\n          width: '100%',\r\n          // TODO: Move inline styles to global CSS\r\n          // height: '100%',\r\n          // backgroundColor: '#F6F6EF',\r\n          // position: 'absolute',\r\n          top: 0,\r\n          left: 0,\r\n          paddingLeft: '40px',\r\n        }}\r\n        className=\"post post-display\"\r\n      >\r\n        <PostContent post={post} />\r\n        <CommentsContainer postId={post.id} />\r\n      </div>\r\n    </Fragment>\r\n  );\r\n};\r\n","import { useState, useEffect, useRef } from 'react';\r\n// import dummyPosts from '../dummyTopPosts';\r\n// import dummyPostIds from '../dummyTopPostIds';\r\n\r\nlet postsFetchedSoFar = 0;\r\n\r\nexport function useTopPosts(noOfPostsToFetch) {\r\n  const [topPosts, setTopPosts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const postIds = useRef([])\r\n\r\n  // Fetch the IDs of the Top Stories\r\n  useEffect(() => {\r\n    fetch('https://hacker-news.firebaseio.com/v0/topstories.json')\r\n      .then(res => res.json())\r\n      .then(res => {\r\n        postIds.current = res;\r\n\r\n        // Fetch the stories\r\n        fetchPostContent(noOfPostsToFetch);\r\n      });\r\n      \r\n    // postIds.current = dummyPostIds;\r\n    // setTopPosts(dummyPosts);\r\n    // postsFetchedSoFar += dummyPosts.length;\r\n    // setLoading(false);\r\n  }, []);\r\n  \r\n  async function fetchPostContent(noOfPostsToFetch, startIndex) {\r\n    setLoading(true);\r\n    startIndex = (startIndex === undefined) ? postsFetchedSoFar : startIndex;\r\n    const reqs = [];\r\n    \r\n    for (let i = startIndex; i < startIndex + noOfPostsToFetch; i++) {\r\n      const id = postIds.current[i];\r\n      \r\n      const req = fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`);\r\n      reqs.push(req);\r\n    }\r\n\r\n    const responses = await Promise.all(reqs);\r\n    const jsonPromises = responses.map(res => res.json());\r\n    const posts = await Promise.all(jsonPromises);\r\n    setLoading(false);\r\n    \r\n    setTopPosts([...topPosts, ...posts]);\r\n    postsFetchedSoFar += noOfPostsToFetch;\r\n    \r\n    return posts;\r\n  }\r\n\r\n  return [topPosts, loading, fetchPostContent];\r\n}\r\n","import React, { memo, useCallback } from 'react';\r\nimport PostContent from '../Post/PostContent';\r\n\r\nexport default memo(({ post, setDisplayedPost }) => {\r\n  const openHNPageInNewTab = useCallback((event) => {\r\n    event.stopPropagation();\r\n\r\n    if (typeof setDisplayedPost === 'function') setDisplayedPost(post);\r\n    else {\r\n      console.log('type of setDisplayedPost: ' + typeof setDisplayedPost);\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <div onClick={openHNPageInNewTab} className=\"post postlist-entry\">\r\n      <PostContent post={post} />\r\n    </div>\r\n  );\r\n});\r\n","import InfiniteScroll from 'react-infinite-scroll-component';\r\nimport React, { memo } from 'react';\r\nimport PostEntry from './PostEntry';\r\n\r\nexport default memo(({ posts, setDisplayedPost, fetchPosts }) => {\r\n  // TODO: Replace 'react-infinite-scroll-component' package (uses the deprecated\r\n  //       componentWillReceiveProps) with 'react-infinite-scroller'\r\n  return (\r\n    <InfiniteScroll\r\n      dataLength={posts.length}\r\n      next={() => fetchPosts(10)}\r\n      hasMore={posts.length <= 500}\r\n      loader={<h4>Loading...</h4>}\r\n      endMessage={\r\n        <p>\r\n          <b>Yay! You have seen it all</b>\r\n        </p>\r\n      }\r\n    >\r\n      {posts.map((post) => (\r\n        <PostEntry\r\n          key={post.id}\r\n          post={post}\r\n          setDisplayedPost={setDisplayedPost}\r\n        />\r\n      ))}\r\n    </InfiniteScroll>\r\n  );\r\n});\r\n","import React, { useState, useCallback } from 'react';\r\nimport FullPost from './Components/Post/FullPost';\r\nimport './App.css';\r\nimport { useTopPosts } from './utils/getTopPosts';\r\nimport PostList from './Components/PostsList/PostList';\r\n\r\nfunction App() {\r\n  const [posts, loading, fetchPosts] = useTopPosts(30);\r\n  const [displayedPost, setDisplayedPost] = useState(null);\r\n\r\n  const clearDisplayedPost = useCallback(() => {\r\n    setDisplayedPost(null);\r\n  }, [setDisplayedPost]);\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      {!displayedPost && (\r\n        <PostList\r\n          posts={posts}\r\n          fetchPosts={fetchPosts}\r\n          setDisplayedPost={setDisplayedPost}\r\n        />\r\n      )}\r\n      {displayedPost && (\r\n        <FullPost\r\n          post={displayedPost}\r\n          clearDisplayedPost={clearDisplayedPost}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}