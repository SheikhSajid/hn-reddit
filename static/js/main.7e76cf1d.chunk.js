(this["webpackJsonphn-reddit"]=this["webpackJsonphn-reddit"]||[]).push([[0],{11:function(e,t,n){e.exports=n(19)},16:function(e,t,n){},18:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(9),o=n.n(r),s=(n(16),n(1)),l=n(7),i=function(e){var t=e.comment,n=t.created_at,r=t.author,o=t.text,i=t.children,m=Object(l.a)(new Date(n),{addSuffix:!0}),d=Object(a.useState)(!1),p=Object(s.a)(d,2),f=p[0],h=p[1],v=Object(a.useCallback)((function(){h(!f)}),[h]);return c.a.createElement("div",{className:"comment-container comment-container-outer"},!f&&c.a.createElement("div",{onClick:v,className:"threadline-container threadline-container-outer"},c.a.createElement("div",{className:"threadline"})),c.a.createElement("div",{className:"comment-content"},c.a.createElement("div",{onClick:function(){return h(!1)},className:"post-metadata"},f&&"[+]",r," \xb7 ",m),!f&&c.a.createElement("div",{className:"comment-body",dangerouslySetInnerHTML:{__html:o}}),!f&&!!i.length&&c.a.createElement(u,{comments:i})))},u=function(e){var t=e.comments,n=e.style;return c.a.createElement("div",{style:n,className:"comments"},t.map((function(e){return c.a.createElement(i,{key:e.id,comment:e})})))},m=n(4),d=n(2),p=n.n(d),f=n(6);function h(e){var t=Object(a.useState)([]),n=Object(s.a)(t,2),c=n[0],r=n[1],o=Object(a.useState)(!0),l=Object(s.a)(o,2),i=l[0],u=l[1],d=Object(a.useRef)({default:c});function h(){return(h=Object(f.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://hn.algolia.com/api/v1/items/".concat(t));case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,r(a.children),d.current=a.children,u(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}return Object(a.useEffect)((function(){!function(e){h.apply(this,arguments)}(e)}),[]),[c,i,function(e){r("Default"===e?d.current:function(e,t){var n=Object(m.a)(t);switch(e){case"Newest":n.sort((function(e,t){return t.created_at_i-e.created_at_i}));break;case"Oldest":n.sort((function(e,t){return e.created_at_i-t.created_at_i}));break;default:return t}return n}(e,c))}]}var v=function(e){var t=e.clickHandler,n=e.options,a=e.selectedOption;return c.a.createElement("div",{className:"dropdown-menu-container"},c.a.createElement("ul",{className:"dropdown-menu"},n.map((function(e){var n=e===a?{color:"var(--orange-accent)"}:void 0;return c.a.createElement("li",{style:n,key:e,onClick:function(){return t(e)}},e)}))))},b=function(e){var t=e.sortComments,n=Object(a.useState)("Default"),r=Object(s.a)(n,2),o=r[0],l=r[1],i=Object(a.useCallback)((function(e){l(e),t(e)}),[l,t]);return c.a.createElement("div",{className:"sort-comment-dropdown"},"Sort By",c.a.createElement("div",{className:"dropdown-container"},c.a.createElement("span",null,o),c.a.createElement(v,{clickHandler:i,options:["Default","Newest","Oldest"],selectedOption:o})))},E=function(e){var t=h(e.postId),n=Object(s.a)(t,3),r=n[0],o=n[1],l=n[2];return c.a.createElement(a.Fragment,null,!o&&c.a.createElement(b,{sortComments:l}),!o&&c.a.createElement(u,{style:{marginLeft:"-20px"},comments:r}),o&&c.a.createElement("h1",null,"Loading Comments..."))};var j=function(e){var t=e.post,n=t.by,r=t.descendants,o=t.id,s=t.score,i=t.time,u=t.title,m=t.text,d=t.url,p=Object(l.a)(new Date(1e3*i),{addSuffix:!0}),f="",h="",v="https://news.ycombinator.com/item?id=".concat(o);m&&m.length>900&&(h=m.slice(0,900)+"...",h+='<br />\n                      <a target="_blank" \n                         rel="noopener noreferrer"\n                         href=\''.concat(v,"'\n                      >\n                        Read more\n                      </a>"));var b=Object(a.useCallback)((function(e){return function(e,t){e.stopPropagation(),window.open(t,"_blank").focus()}(e,d)}),[d]),E=Object(a.useCallback)((function(e){e.stopPropagation(),navigator.clipboard.writeText(d).then((function(){return alert("URL copied: ".concat(d))})).catch((function(e){return console.error(e)}))}),[d]);return d&&("/"===(f=(f=(f=d.startsWith("https://")?d.slice(8,33):d.slice(0,25)).startsWith("http://")?f.slice(7,32):f.slice(0,25)).startsWith("www.")?f.slice(4):f.slice(0)).slice(-1)&&(f=f.slice(0,-1)),d.length>33&&(f+="...")),c.a.createElement(a.Fragment,null,c.a.createElement("div",{className:"like-count"},c.a.createElement("div",null,s),c.a.createElement("div",null,"Likes")),c.a.createElement("div",{className:"post-content"},c.a.createElement("div",{className:"post-metadata"},"Posted by ",n," ",p),c.a.createElement("h2",{className:"post-title"},u),c.a.createElement("div",{className:"post-body"},d&&c.a.createElement("p",{onClick:b,className:"url-shortened"},f),m&&c.a.createElement("div",{className:"post-text",dangerouslySetInnerHTML:{__html:h}})),c.a.createElement("div",{className:"post-bottom"},c.a.createElement("div",null,r," Comments"),c.a.createElement("div",{onClick:E},"Copy Link"),c.a.createElement("div",null,"Save"),c.a.createElement("div",null,"Hide"))))},O=function(e){var t=e.post,n=e.clearDisplayedPost;return c.a.createElement(a.Fragment,null,c.a.createElement("button",{style:{marginBottom:"-2px",backgroundColor:"white"},onClick:n},"< back"),c.a.createElement("div",{style:{width:"100%",top:0,left:0,paddingLeft:"40px"},className:"post post-display"},c.a.createElement(j,{post:t}),c.a.createElement(E,{postId:t.id})))},y=(n(18),0);var k=n(10),w=Object(a.memo)((function(e){var t=e.post,n=e.setDisplayedPost,r=Object(a.useCallback)((function(e){e.stopPropagation(),"function"===typeof n?n(t):console.log("type of setDisplayedPost: "+typeof n)}),[]);return c.a.createElement("div",{onClick:r,className:"post postlist-entry"},c.a.createElement(j,{post:t}))})),g=Object(a.memo)((function(e){var t=e.posts,n=e.setDisplayedPost,a=e.fetchPosts;return c.a.createElement(k.a,{dataLength:t.length,next:function(){return a(10)},hasMore:t.length<=500,loader:c.a.createElement("h4",null,"Loading..."),endMessage:c.a.createElement("p",null,c.a.createElement("b",null,"Yay! You have seen it all"))},t.map((function(e){return c.a.createElement(w,{key:e.id,post:e,setDisplayedPost:n})})))}));var N=function(){var e=function(e){var t=Object(a.useState)([]),n=Object(s.a)(t,2),c=n[0],r=n[1],o=Object(a.useState)(!0),l=Object(s.a)(o,2),i=l[0],u=l[1],d=Object(a.useRef)([]);function h(e,t){return v.apply(this,arguments)}function v(){return(v=Object(f.a)(p.a.mark((function e(t,n){var a,o,s,l,i,f,h;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(u(!0),a=[],o=n=void 0===n?y:n;o<n+t;o++)s=d.current[o],l=fetch("https://hacker-news.firebaseio.com/v0/item/".concat(s,".json")),a.push(l);return e.next=6,Promise.all(a);case 6:return i=e.sent,f=i.map((function(e){return e.json()})),e.next=10,Promise.all(f);case 10:return h=e.sent,u(!1),r([].concat(Object(m.a)(c),Object(m.a)(h))),y+=t,e.abrupt("return",h);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){fetch("https://hacker-news.firebaseio.com/v0/topstories.json").then((function(e){return e.json()})).then((function(t){d.current=t,h(e)}))}),[]),[c,i,h]}(30),t=Object(s.a)(e,3),n=t[0],r=(t[1],t[2]),o=Object(a.useState)(null),l=Object(s.a)(o,2),i=l[0],u=l[1],d=Object(a.useCallback)((function(){u(null)}),[u]);return c.a.createElement("div",{className:"App"},!i&&c.a.createElement(g,{posts:n,fetchPosts:r,setDisplayedPost:u}),i&&c.a.createElement(O,{post:i,clearDisplayedPost:d}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[11,1,2]]]);
//# sourceMappingURL=main.7e76cf1d.chunk.js.map