(this["webpackJsonphn-reddit"]=this["webpackJsonphn-reddit"]||[]).push([[0],{12:function(e,t,n){e.exports=n(20)},17:function(e,t,n){},19:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(9),o=n.n(c),s=(n(17),n(1)),l=n(7),i=function(e){var t=e.comment,n=t.created_at,c=t.author,o=t.text,i=t.children,m=Object(l.a)(new Date(n),{addSuffix:!0}),d=Object(a.useState)(!1),p=Object(s.a)(d,2),f=p[0],h=p[1],v=Object(a.useCallback)((function(){h(!f)}),[h]);return r.a.createElement("div",{className:"comment-container comment-container-outer"},!f&&r.a.createElement("div",{onClick:v,className:"threadline-container threadline-container-outer"},r.a.createElement("div",{className:"threadline"})),r.a.createElement("div",{className:"comment-content"},r.a.createElement("div",{onClick:function(){return h(!1)},className:"post-metadata"},f&&"[+]",c," \xb7 ",m),!f&&r.a.createElement("div",{className:"comment-body",dangerouslySetInnerHTML:{__html:o}}),!f&&!!i.length&&r.a.createElement(u,{comments:i})))},u=function(e){var t=e.comments,n=e.style;return r.a.createElement("div",{style:n,className:"comments"},t.map((function(e){return r.a.createElement(i,{key:e.id,comment:e})})))},m=n(2),d=n.n(m),p=n(11),f=n(6),h=n(3);function v(e){var t=Object(a.useRef)([]),n=Object(h.c)(["postWithComments",e],(function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return b.apply(void 0,n.concat([t]))}),{staleTime:18e4});return[n.data,n.isLoading,function(n){var a;a="Default"===n?function(){return t.current}:function(e){return function(e,t){var n=Object(p.a)(t);switch(e){case"Newest":n.sort((function(e,t){return t.created_at_i-e.created_at_i}));break;case"Oldest":n.sort((function(e,t){return e.created_at_i-t.created_at_i}));break;default:return t}return n}(n,e)},h.a.setQueryData(["postWithComments",e],a)}]}function b(e,t,n){return E.apply(this,arguments)}function E(){return(E=Object(f.a)(d.a.mark((function e(t,n,a){var r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://hn.algolia.com/api/v1/items/".concat(n));case 2:return r=e.sent,e.next=5,r.json();case 5:return c=e.sent,a&&(a.current=c.children),e.abrupt("return",c.children);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g=function(e){var t=e.clickHandler,n=e.options,a=e.selectedOption;return r.a.createElement("div",{className:"dropdown-menu-container"},r.a.createElement("ul",{className:"dropdown-menu"},n.map((function(e){var n=e===a?{color:"var(--orange-accent)"}:void 0;return r.a.createElement("li",{style:n,key:e,onClick:function(){return t(e)}},e)}))))},y=function(e){var t=e.sortComments,n=Object(a.useState)("Default"),c=Object(s.a)(n,2),o=c[0],l=c[1],i=Object(a.useCallback)((function(e){l(e),t(e)}),[l,t]);return r.a.createElement("div",{className:"sort-comment-dropdown"},"Sort By",r.a.createElement("div",{className:"dropdown-container"},r.a.createElement("span",null,o),r.a.createElement(g,{clickHandler:i,options:["Default","Newest","Oldest"],selectedOption:o})))},k=function(e){var t=v(e.postId),n=Object(s.a)(t,3),c=n[0],o=n[1],l=n[2];return r.a.createElement(a.Fragment,null,!o&&r.a.createElement(y,{sortComments:l}),!o&&r.a.createElement(u,{style:{marginLeft:"-20px"},comments:c}),o&&r.a.createElement("h1",null,"Loading Comments..."))};var w=function(e){var t=e.post,n=t.by,c=t.descendants,o=t.id,s=t.score,i=t.time,u=t.title,m=t.text,d=t.url,p=Object(l.a)(new Date(1e3*i),{addSuffix:!0}),f="",h="",v="https://news.ycombinator.com/item?id=".concat(o);m&&m.length>900&&(h=m.slice(0,900)+"...",h+='<br />\n                      <a target="_blank" \n                         rel="noopener noreferrer"\n                         href=\''.concat(v,"'\n                      >\n                        Read more\n                      </a>"));var b=Object(a.useCallback)((function(e){return function(e,t){e.stopPropagation(),window.open(t,"_blank").focus()}(e,d)}),[d]),E=Object(a.useCallback)((function(e){e.stopPropagation(),navigator.clipboard.writeText(d).then((function(){return alert("URL copied: ".concat(d))})).catch((function(e){return console.error(e)}))}),[d]);return d&&("/"===(f=(f=(f=d.startsWith("https://")?d.slice(8,33):d.slice(0,25)).startsWith("http://")?f.slice(7,32):f.slice(0,25)).startsWith("www.")?f.slice(4):f.slice(0)).slice(-1)&&(f=f.slice(0,-1)),d.length>33&&(f+="...")),r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:"like-count"},r.a.createElement("div",null,s),r.a.createElement("div",null,"Likes")),r.a.createElement("div",{className:"post-content"},r.a.createElement("div",{className:"post-metadata"},"Posted by ",n," ",p),r.a.createElement("h2",{className:"post-title"},u),r.a.createElement("div",{className:"post-body"},d&&r.a.createElement("p",{onClick:b,className:"url-shortened"},f),m&&r.a.createElement("div",{className:"post-text",dangerouslySetInnerHTML:{__html:h}})),r.a.createElement("div",{className:"post-bottom"},r.a.createElement("div",null,c," Comments"),r.a.createElement("div",{onClick:E},"Copy Link"),r.a.createElement("div",null,"Save"),r.a.createElement("div",null,"Hide"))))},j=function(e){var t=e.post,n=e.clearDisplayedPost;return r.a.createElement(a.Fragment,null,r.a.createElement("button",{style:{marginBottom:"-2px",backgroundColor:"white"},onClick:n},"< back"),r.a.createElement("div",{style:{top:0,left:0,paddingLeft:"40px"},className:"post post-display"},r.a.createElement(w,{post:t}),r.a.createElement(k,{postId:t.id})))};n(19);function O(e,t){return N.apply(this,arguments)}function N(){return(N=Object(f.a)(d.a.mark((function e(t,n){var a,r,c,o,s,l,i,u=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]?u[2]:0,c=t.slice(30*r,30*r+30),null!==(a=!r)&&void 0!==a||console.log("first load!"),console.log("loading! :3"),o=[],c.forEach((function(e){var t=fetch("https://hacker-news.firebaseio.com/v0/item/".concat(e,".json"));o.push(t)})),e.next=8,Promise.all(o);case 8:return s=e.sent,l=s.map((function(e){return e.json()})),e.next=12,Promise.all(l);case 12:return i=e.sent,e.abrupt("return",i);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return console.log("posting ids"),fetch("https://hacker-news.firebaseio.com/v0/topstories.json").then((function(e){return e.json()}))}var x=n(10),P=Object(a.memo)((function(e){var t=e.post,n=e.setDisplayedPost,c=Object(a.useCallback)((function(e){e.stopPropagation(),"function"===typeof n?n(t):console.log("type of setDisplayedPost: "+typeof n)}),[]);return r.a.createElement("div",{onClick:c,className:"post postlist-entry"},r.a.createElement(w,{post:t}))})),_=Object(a.memo)((function(e){var t=e.posts,n=e.setDisplayedPost,a=e.fetchPosts;return r.a.createElement(x.a,{dataLength:t.length,next:a,hasMore:t.length<=500,loader:r.a.createElement("h4",null,"Loading..."),style:{width:"640px"},endMessage:r.a.createElement("p",null,r.a.createElement("b",null,"Yay! You have seen it all"))},t.map((function(e){return r.a.createElement(P,{key:e.id,post:e,setDisplayedPost:n})})))}));var D=function(){var e=function(){var e=Object(h.c)("topPostIds",C,{staleTime:18e4}).data,t=Object(h.b)("topPosts",(function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return O.apply(void 0,[e||[]].concat(n))}),{getFetchMore:function(e,t){return t.length<500?t.length:void 0},enabled:e,staleTime:18e4}),n=t.data,a=t.isFetchingMore,r=t.fetchMore;return[n?n.flat():[],a,r]}(),t=Object(s.a)(e,3),n=t[0],c=(t[1],t[2]),o=Object(a.useState)(null),l=Object(s.a)(o,2),i=l[0],u=l[1],m=Object(a.useCallback)((function(){u(null)}),[u]);return r.a.createElement("div",{className:"App"},!i&&r.a.createElement(_,{posts:n,fetchPosts:c,setDisplayedPost:u}),i&&r.a.createElement(j,{post:i,clearDisplayedPost:m}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[12,1,2]]]);
//# sourceMappingURL=main.2c888e9e.chunk.js.map